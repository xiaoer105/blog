---
title: "什么是 Http 协议"
date: 2021-11-03T14:48:00+08:00
draft: false
toc: true
images:
tags: 
  - http
---

Http 是超文本传输协议（HyperText Transfer Protocol），属于应用层协议，基于 TCP/IP 协议（实现寻址、路由和可靠的数据传输）。
能够在网络的任意两点之间传输文字、图片、音视频等超文本数据，是一种网络通信的约定和规范。

Http与应用程序、操作系统、Web服务器密切相关。

## 超文本协议
Http 可以拆分成三个部分，分别是超文本、传输、协议，下面说明下。

### 超文本
我们先了解文本，在 Http 传输过程中，与 TCP/UDP 这些底层协议传输的是二进制包不同的是，Http 传输的数据是完整有意义的数据，
可以被浏览器、服务器等上层应用程序处理

超文本与文本不同的是，文本只能传输文本信息，而超文本可以传输图片、音视频等文件。
### 传输
Http 是一种传输协议，我们可以理解把数据从 A 点发送到 B 点，或者 B 点发送到 A 点，这个过程叫做传输。

Http 协议是“双向协议”，有两个角色，分别是客户端（请求方）和服务端（响应方或者应答方）。
双方在 Http 协议的约定下进行通讯，客户端向服务端发送数据，服务端处理完对客户端继续响应。

### 协议
双方按照协议规定进行传输数据，约定什么该做，什么不该做，先做什么后做什么，出问题了怎么处理等等。

## Http 版本
Http 从 1989 年被蒂姆·伯纳斯-李在论文中提出到现在已经发生了几个版本的迭代。

Http 用于计算机之间通讯的协议，发生在网络连接、传输超文本数据的一个“动态过程”。

设计之初是用来传输纯文本数据。

### Http/0.9
Http 0.9 版本结构比较简单，采用纯文本格式进行传输数据。
只提供 GET 方法从服务器获取 HTML 文档，服务端响应完之后，就与客户端断开连接。

### Http/1.0
Http/1.0 与 1996年正式发布，相比 Http/0.9 增加以下功能：
1. 增加 `HEAD 和 POST` 方法。
2. 新增`响应码`，标记可能的错误原因。
3. 引入`协议版本号`概念。
4. 引入 `Http Header` 的概念，处理请求和响应更加灵活。
5. 传输的数据`不仅限文本`。

此时的 1.0 版本并不是一个标准，类似一个参考文档。

### Http/1.1
Http/1.1 算是互联网基石，应用最广泛，与 1.0 相比改动不不是很大，但是 1.1 不再像 1.0 那样只是参考文档，而变成了正式的标准，之后所有的浏览器、服务器、网关、代理等，只要是使用到了 Http 协议，那么就需要遵守这个标准。

Http/1.1 主要的变更有：
1. 增加了 `PUT 和 DELETE` 方法。
2. 增加了`缓存管理和控制`。
3. 支持`长连接`。
4. 允许`响应数据分块`（chunked），利于数据传输大文件。
5. 强制要求 `Host 头`。

### Http/2
Http/2 在2015年发布，基于 Google 开发的 `SPDY` 协议制定。

Http/2 在兼容 Http/1.1 的同时在性能上也做出了很大的提升，主要由：
1. 纯文本协议改为`二进制协议`。
2. 可以发起`多次请求`，废弃了 1.1 里的管道。多次请求类似 rpc 中流传输。
3. 使用了专门的`算法压缩了头部数据`替换了纯文本 Header ，减少传输数据量。
4. 允许`服务器主动向客户端连接`。
5. 增加安全性，要求`加密通信`。

### Http/3
2018年，互联网标准化组织 IETF 提议将 Google 开发的 `QUIC` 协议更名为 Http/3 并获得批准，Http/3 进入标准化制订阶段。 

## Http 特点

### 简单、易扩展
Http 只规定了报文格式，使用空格分隔单词，使用换行分隔字段，header+body等，报文各个组成部分都没有严格的语义限制，可以由开发者任意定制。例如修改协议中的请求方式、URL 地址、状态码、头部字段等。

### 可靠传输
Http 基于 TCP/IP 协议的，TCP 本身就是一个可靠的协议，Http 也就继承了这个特性。

但是 Http 也不能保证 100% 数据一定能够发送到另一方，在网络不稳定的情况下，会导致发送失败。可靠只是向使用者提供了一个承诺。
### 应用层协议
Http 属于应用层协议。对于 Http 来说，可以传递一切数据，可以说的上是一个“万能”的协议。

### 请求-应答方式
Http 采用请求-应答的方式。每次请求都是由客户端发起连接和请求的，服务端收到客户端的请求后才可以进行答复。

### 无状态
Http 协议是无状态的。

要怎么理解无状态呢？服务器没有“记忆功能”，比如我们每次访问 API 接口的时候需要携带 Token（唯一标识），因为 Http 不会记录你上一次请求时的数据。

### 明文传输
Http 协议使用明文的方式传输数据，报文数据没有使用二进制数据，而是使用可阅读的文本形式。

使用明文带来的好处是直接阅读协议内容，坏处是把报文的所有信息都暴露出来。

## Http 缺点
Http 除了提供了易扩展、无状态、可靠等特性之外，也存在一些缺点，例如：
1. 数据使用明文的方式传输，可以通过抓包工具看到报文中的所有信息，导致信息泄露。
2. 没有提供有效的手段来确定通信双方的真实身份，也就是缺少身份验证。
3. 没有提供完整性验证，在传输过程中，因为是明文传输，数据很容易被篡改。

## Http 与其他协议关系
Http通常在 TCP/IP 协议栈之上，通过借助 IP 协议实现寻址和路由、TCP 协议实现可靠数据传输、DNS 协议实现域名查找、SSL/TLS 协议实现安全通讯。
其中 Web Scoket、 HttpDNS 等协议依赖于 Http，这些协议相互交织，构成一个协议网，而 Http 处于中心地位。

## 小结
1. Http 是一种在计算机之间（两点）进行通信、传输数据的规范和协议。
2. Http 传输文字、图片、音视频等超文本数据。
3. Http 是构建网络重要的技术，依赖于其它协议/技术来实现，也存在一些技术依赖于它。